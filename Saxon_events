# Saxon events

namespace = saxon_events

#Beginning of the Bruderkrieg
country_event = {
	id = saxon_events.1
	title = "saxon_events.1.t"
	desc = "saxon_events.1.d"
	picture = civil_war_eventpicture
	
	trigger = {
		tag = SAX
		is_year = 1446
		have regency = no
		has_ruler = Friedrich III Wettin
		if = {
			NOT = {
				has_country_flag = saxon_brother_war
			}
		}
	}
	
	mean_time_to_happen = {
		months = 6
	}
	
	fire_only_once = yes
	
	option = {
		name = saxon_events.1.option.a
		63 = {
			spawn_rebels = {
				type = pretender_rebels
				size = 1
				leader = "Wilhelm III von Wettin"
			}
				change_controller = REB
				add_building = fort_15th
		}
		ROOT = {
			set_country_flag = saxon_brother_war
		}
		BOH = {
			country_event = {
				id = saxon_events.2
				days = 100
				random = 50
			}
		}
	}
}

#Bohemian Intervention
country_event = {
	id = saxon_events.2
	title = "saxon_events.2.t"
	desc = "saxon_events.2.d"
	picture = BORDER_TENSION_eventPicture

	is_triggered_only = yes
	
	trigger = {
		tag = BOH
		SAX = {
			has_country_flag = saxon_brother_war
		}
	}
	
	fire_only_once = yes
	
	option = {
		name = saxon_events.2.option.a
		ai_chance = {
			factor = 90
		}
		add_manpower = -1
		set_country_flag = saxon_brother_war_manpower
		#saxon response
		SAX = {
			country_event = {
			id = saxon_events.3
			days = 30
			random = 5
			}
		}
	}
	option = {
		name = saxon_events.2.option.b
		ai_chance = {
			factor = 10
		}
		add_treasury = -50
		BOH = {
			set_country_flag = saxon_brother_war_money
		}
		SAX = {
			country_event = {
			id = saxon_events.4
			days = 30
			random = 5
			}
		}
	}
	option = {
		name = saxon_events.2.option.c
		ai_chance = {
			factor = 00
		}
		BOH = {
			set_country_flag = saxon_brother_war_none
		}
	}
}


#Bohemian Intervention Saxon Response, Manpower
country_event = {
	id = saxon_events.3
	title = "saxon_events.3.t"
	desc = "saxon_events.3.d"
	picture = BORDER_TENSION_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		tag = SAX
		has_country_flag = saxon_brother_war
	}

	option = {
		#use manpower to lessen devastation
		name = saxon_events.3.option.a
		add_historical_rival = BOH
		BOH = {
			add_historical_rival = ROOT
		}
		add_manpower = -1
		2965 = {
			add_devastation = 10
		}
		61 = {
			add_devastation = 10
		}
		59 = {
			add_devastation = 10
		}
	}
		
	option = {
		#max devastation
		name = saxon_events.3.option.b
		add_historical_rival = BOH
		BOH = {
		add_historical_rival = ROOT
		}
		2965 = {
			add_devastation = 35
		}
		61 = {
			add_devastation = 35
		}
		59 = {
			add_devastation = 35
		}
	}
}

#Bohemian Intervention Saxon Response, Money
country_event = {
	id = saxon_events.4
	title = "saxon_events.4.t"
	desc = "saxon_events.4.d"
	picture = CORRUPTION_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		tag = SAX
		has_country_flag = saxon_brother_war
	}
	
	option = {
		name = saxon_events.4.option.a
		add_historical_rival = BOH
		BOH = {
			add_historical_rival = ROOT
		}
		remove_opinion = {
			who = BOH
			modifier = supported_rebels
		}
		62 = {
			spawn_rebels = {
			type = pretender_rebels
			size = 1
			}
			change_controller = REB
		}
	}
	
}

#Frieden von Naumburg / End of Brother War / Friedrich Victory
country_event = {
	id = saxon_events.5
	title = "saxon_events.5.t"
	desc = "saxon_events.5.d"
	picture = GOOD_WITH_MONARCH_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		tag = SAX
		has_country_flag = saxon_brother_war
		FROM = {
			province_id = 63 #Thuringia
		}
	}
	
	option = {
		name = saxon_events.5.option.a
		add_manpower = 5
		clr_country_flag = saxon_brother_war
		set_country_flag = had_saxon_brother_war.1
		country_event = {
			id = saxon_events.8
			months = 6
			random = 4
		}
	}
}

#Frieden von Naumburg / delay_event (acts as a 12-day delay between pretenders winning and event screen popping)
country_event = {
	id = saxon_events.6
	title = "saxon_events.6.t"
	desc = "saxon_events.6.d"
	picture = GOOD_WITH_MONARCH_eventPicture
	
	hidden = yes
	
	is_triggered_only = yes
	
	trigger = {
		tag = SAX
		has_country_flag = saxon_brother_war
	}
	
	option = {
		name = saxon_events.6.option.a
		country_event = {
			id = saxon_events.7
			days = 12
		}
	}
}

#Frieden von Naumburg / End of Brother War / Wilhelm Victory
country_event = {
	id = saxon_events.7
	title = "saxon_events.7.t"
	desc = "saxon_events.7.d"
	picture = GOOD_WITH_MONARCH_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		tag = SAX
		if = {
			has_ruler = "Wilhelm"
		}
		has_country_flag = saxon_brother_war
	}
	
	option = {
		name = saxon_events.7.option.a
		add_manpower = 5
		clr_country_flag = saxon_brother_war
		set_country_flag = had_saxon_brother_war.2
	}
}

#Prinzenraub / Demand of Payment
country_event = {
	id = saxon_events.8
	title = "saxon_events.8.t"
	desc = "saxon_events.8.d"
	picture = ACCUSATION_eventPicture
	
	trigger = {
		tag = SAX
		has_country_flag = had_saxon_brother_war.1
		year = 1455
	}
	
	mean_time_to_happen = {
		months = 36
	}
	
	option = {
		name = saxon_events.8.option.a	#refuse payment
		add_prestige = 15
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -15
		}
		country_event = {
			name = saxon_events.9
			days = 365
			random = 120
		}
	}
	
	option = {
		name = saxon_events.8.option.b	#pay
		add_treasury = -150
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = 10
		}
		62 = {
			add_devastation = -10
		}
	}
}

#Prinzenraub / The Decision of the Courts
country_event = {
	id = saxon_events.9
	title = "saxon_events.9.t"
	desc = "saxon_events.9.d"
	picture = LIBERUM_VETO_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		tag = SAX
	}
	
	option = {
		name = saxon_events.9.option.a
		set_country_flag = saxon_prinzenraub
		add_prestige = 15
	}
}

#Prinzenraub / Altenburger Prinzenraub
country_event = {
	id = saxon_events.10
	title = "saxon_events.10.t"
	desc = "saxon_events.10.d"
	picture = REFORM_eventPicture
	
	trigger = {
		tag = SAX
		is_year = 1455
		has_country_flag = saxon_prinzenraub
	}
	
	mean_time_to_happen = {
		years = 2
	}
	
	option = {
		name = saxon_events.10.option.a #pay ransom
		add_legitimacy = -10
		add_prestige = -10
		add_treasury = -200
		
	}
	
	option = {
		name = saxon_events.10.option.b #don't pay ransom
		random_list = {
			60 = {
				country_event = {
					name = saxon_events.11
					days = 5
				}
				set_country_flag = saxon_prinzenraub.1 #the heirs are safe
			}
			20 = {
				country_event = {
					name = saxon_events.12
					days = 5
				}
				set_country_flag = saxon_prinzenraub.2 #the heirs are dead
			}
			10 = {
				country_event = {
					name = saxon_events.13
					days = 5
				}
				set_country_flag = saxon_prinzenraub.3 #von kauffungen makes it to bohemia
			}
		}
	}
}

#Prinzenraub / Heirs Safe
country_event = {
	id = saxon_events.11
	title = "saxon_events.11.t"
	desc = "saxon_events.11.d"
	picture = GOOD_WITH_MONARCH_eventPicture

	trigger = {
		tag = SAX
		has_country_flag = saxon_prinzenraub.1
	}
	
	option = {
		name = saxon_events.11.option.a
		add_stability = 1
		add_prestige = 10
		62 = {
			add_building = temple
		}
	}
}

#Prinzenraub / Heirs Dead
country_event = {
		id = saxon_events.12
		title = "saxon_events.12.t"
		desc = "saxon_events.12.d"
		picture = DEATH_OF_HEIR_eventPicture
		trigger = {
t		
			tag = SAX
			has_country_flag = saxon_prinzenraub.2
		}
		
		option = {
			name = saxon_events.12.option.a
			kill_heir = yes
		}
}

#Prinzenraub / Into Bohemia
country_event = {
	id = saxon_events.13
	title = "saxon_events.13.t"
	desc = "saxon_events.13.d"
	picture = DIPLOMACY_eventPicture
	
	trigger = {
		tag = SAX
		has_country_flag = saxon_prinzenraub.3
	}
	
	option = {
		name = saxon_events.13.option.a
		declare_war_with_cb = {
			who = BOH
			casus_belli = cb_insult
		}
		hidden_effect = {
				exile_heir_as = saxon_heir_prinzenraub
		}
				
	}
	
	option = {
		name = saxon_events.13.option.b
		BOH = {
			country_event = {
				id = saxon_events.14
				days = 5
			}
			hidden_effect = {
				exile_heir_as = saxon_heir_prinzenraub
			}
		}
	}
}

#Prinzenraub / Bohemian Response
country_event = {
	id = saxon_events.14
	title = "saxon_events.14.t" 
	desc = "saxon_events.14.d"
	picture = DIPLOMACY_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		tag = BOH
	}
	
	option = {
		name = saxon_events.14.option.a
		trigger = {
			was_player = no
			has_opinion = {
				who = SAX
				value = 10
			}
		}
		add_country_modifier = {
			name = improved_dip_reputation
			duration = 365
		}
		SAX ={
			country_event = {
				id = saxon_events.15
				days = 5
			}
		}
	}
	
	option = {
		name = saxon_events.14.option.b
		trigger = {
			was_player = no
			NOT = {
				has_opinion = {
					who = SAX
					value = 10
				}
			}
		}
		declare_war_with_cb = {
			who = SAX
			casus_belli = cb_vassalize_mission
		}
	}
	
	option = {
		name = saxon_events.14.option.a
		trigger = {
			was_player = yes
		}
		add_country_modifier = {
			name = improved_dip_reputation
			duration = 365
		}
		SAX ={
			country_event = {
				id = saxon_events.15
				days = 5
			}
		}
	}
	
	option = {
		name = saxon_events.14.option.b
		trigger = {
			was_player = yes
		}
		declare_war_with_cb = {
			who = SAX
			casus_belli = cb_vassalize_mission
		}
	}
	
}

#Bohemia returns the heir
country_event = {
	id = saxon_events.15
	title = "saxon_events.15.t"
	desc = "saxon_events.15.d"
	picture = DIPLOMACY_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = saxon_events.15.option.a
		set_heir = saxon_heir_prinzenraub
		}
	}
}

#Bohemia wins the subjugation war
country_event = {
	id = saxon_events.16
	title = "saxon_events.16.t"
	desc = "saxon_events.16.d"
	picture = DIPLOMACY_eventPicture
}
